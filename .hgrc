# -*- mode: conf -*-

%include ~/.hgauth

[ui]
username = Alexander Solovyov <alexander@solovyov.net>
ignore=~/.hgignore
ssh = ssh -C
merge = internal:merge
usehttp2 = True

[format]
generaldelta = true

[web]
cacerts = /etc/hg-dummy-cert.pem

[hooks]
#commit.diffstat = python:~/dev/hg/hg/contrib/python-hook-examples.py:diffstat
#changegroup.diffstat = python:~/dev/hg/hg/contrib/python-hook-examples.py:diffstat
#pretxncommit.whitespace = hg export tip | (! egrep -q '^\+.*[[:space:]]$')

[merge-tools]
p4.priority = 60
p4.premerge = True
p4.executable = /Applications/p4merge.app/Contents/MacOS/p4merge
p4.gui = True
p4.args = $base $local $other $output
p4.binary = False

sourcetreemerge.gui=True
sourcetreemerge.premerge=False
sourcetreemerge.executable=/Applications/SourceTree.app/Contents/Resources/opendiff-w.sh
sourcetreemerge.args="$local" "$other" -ancestor "$base" -merge "$output"
sourcetreemerge.checkconflicts=True
sourcetreemerge.binary=False

[extdiff]
cmd.opendiff = opendiff-w
cmd.ksdiff = ksdiff-wrapper
opts.ksdiff = hg
cmd.codediff = codediff.py

opts.sourcetreediff=
cmd.sourcetreediff=opendiff

[extensions]
progress=
patchbomb=
mq=
graphlog=
churn=
color=
pager=
purge=
record=
rebase=
#zeroconf=
extdiff=
inotify=!
convert=
share=
transplant=
relink=
schemes=

remote-bookmarks = ~/dev/hg/remote-bookmarks/remote-bookmarks.py
hgstash = ~/dev/hg/hgstash/hgstash.py

shrink=~/dev/hg/hg/contrib/shrink-revlog.py
perf=~/dev/hg/hg/contrib/perf.py
crecord=~/dev/hg/crecord/crecord/
qup=~/dev/hg/qup.py
qimprovements=~/dev/hg/qimprovements/qimprovements.py
hg-git = ~/dev/hg/hg-git/hggit/
histedit = ~/dev/hg/histedit/hg_histedit.py

[diff]
git = True
showfunc = True

[patch]
eol = lf

[inotify]
autostart = True

[bookmarks]
track.current = True

[email]
method = sendmail

[pager]
pager = LESS='FRQX' less
attend = help, annotate, diff, glog, incoming, log, outgoing, qdiff, tip, p, sglog, slog, wlog, cat, ., /, mergediff

[defaults]
annotate = -un

[alias]
positional = log --template '{$2} {$1} | {date|isodate}\n'
slog = log --template '{date|shortdate} [{rev}:{node|short}] {tags} {bookmarks} {author|person}: {desc|firstline}\n' -l 10
bdiff = !$HG diff -r "ancestor($1, master)" -r "$1"
. = slog
sglog = glog --style ~/.hgconcise -l 10
xlog = sglog -r "..'$1' - ..master" -l 500
/ = sglog
blog = / -r "b($1, master)" -l 500
wlog = log --style ~/.hgconcise -l 10
sin = incoming --template '{date|shortdate} [{rev}:{node|short}] {author|person}: {desc|firstline}\n'
sout = outgoing --template '{date|shortdate} [{rev}:{node|short}] {author|person}: {desc|firstline}\n'
sheads = heads --template '{date|shortdate} [{rev}:{node|short}] {tags} {bookmarks} {author|person}: {desc|firstline}\n'
p = log -v --style ~/.hgconcise -p -r
nudge = push --rev .
sqr = summary -q --remote
qnew = qnew -D -U
qseries = qseries -s
cm = ci -m
dm = done -m
churn = churn --aliases ~/.churnaliases
activity = activity --aliases ~/.churnaliases
notreleased = / -r "reverse(not ancestors(tagged()))"
release = hg bookmark -f release
fixed = resolve -m
pb = push -B . -f

[revsetalias]
h = heads(ancestors(tip))
b($1, $2) = ancestors($1) - ancestors($2)
merged = bookmark() and ..master - master

[schemes]
p = ssh://piranha.org.ua/hg/
p+http = http://hg.piranha.org.ua/
s = ssh://sapientisat.org/
w = file:~/dev/web/
h = file:~/dev/hg/
pl = ssh://code.paylogic.eu//var/hg/
u = ssh://code.paylogic.eu//var/hg/users/alexander/

[tasks]
auto.track.new = True

[paths]
release = pl://stable/paylogic/release

[paylogic]
repos = ~/dev/work/paylogic
